openapi: 3.0.3
info:
  title: CoCart - Cart API v2
  description: Decouple your WooCommerce store with ease with our developer friendly REST API extension.
  termsOfService: http://cocartapi.com/terms-of-conditions-polar/
  contact:
    email: support@cocartapi.com
  license:
    name: GNU General Public License v3.0
    url: http://www.gnu.org/licenses/gpl-3.0.html
  version: 4.3.21 # Version of core plugin the spec was last updated from.
externalDocs:
  description: Find out more about CoCart API
  url: https://docs.cocartapi.com
security:
  - basicAuth: []
  - bearerAuth: []
tags:
  - name: Cart
    description: Manage and update the cart.
  - name: Add Items to Cart
    description: Add products to the cart.
  - name: Manage Cart Items
    description: Manage items currently added to the cart.
  - name: Counting
    description: Count items and totals in cart.
paths:
  /cocart/v2/cart:
    get:
      tags:
        - Cart
      summary: Get Cart
      description: Retrieves the requested cart in session containing customers information, items added, shipping options (if any), totals and more.
      operationId: "getCart"
      parameters:
        - name: cart_key
          in: query
          description: Unique identifier for the cart.
          required: false
          schema:
            type: string
        - name: fields
          in: query
          description: Specify each parent field you want to request separated by (,) in the response before the data is fetched.
          schema:
            type: string
        - name: thumb
          in: query
          description: True if you want to return the URL of the featured product image for each item in the cart.
          schema:
            type: boolean
            default: true
        - name: default
          in: query
          description: Return the default cart data if set to true.
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
  /cocart/v2/cart/add-item:
    post:
      tags:
        - Add Items to Cart
      summary: Add Item to Cart
      description: Adds a single item to the cart.
      operationId: "addItem"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddItem'
      responses:
        '200':
          description: Item added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
  /cocart/v2/cart/add-items:
    post:
      tags:
        - Add Items to Cart
      summary: Add Items to Cart
      description: Adds multiple items to the cart.
      operationId: "addItems"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddItems'
      responses:
        '200':
          description: Items added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
  /cocart/v2/cart/item/{item_key}:
    get:
      tags:
        - Item
      summary: "Get a single item in the cart"
      description: "Retrieve a specific item in the cart by its unique item key."
      parameters:
        - name: "item_key"
          in: "path"
          required: true
          description: "Unique identifier for the item in the cart."
          schema:
            type: "string"
      responses:
        '200':
          description: "Successful response"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/cartItem"

components:
  securitySchemes:
    basicAuth:
      type: http
      scheme: basic
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    Cart:
      type: object
      properties:
        cart_hash:
          type: string
          description: A Unique hash key of the carts contents.
        cart_key:
          type: string
          description: The cart key identifying the cart in session.
        currency:
          type: object
          properties:
            currency_code:
              type: string
              description: The currency code (in ISO format) for returned prices.
            currency_symbol:
              type: string
              description: The currency symbol for the currency which can be used to format returned prices.
            currency_symbol_pos:
              type: string
              description: The currency symbol position to which the currency needs to return for the prices.
            currency_minor_unit:
              type: integer
              description: The currency minor unit (number of digits after the decimal separator) for returned prices.
            currency_decimal_separator:
              type: string
              description: The decimal separator for the currency which can be used to format returned prices.
            currency_thousand_separator:
              type: string
              description: The thousand separator for the currency which can be used to format returned prices.
            currency_prefix:
              type: string
              description: The price prefix for the currency which can be used to format returned prices.
            currency_suffix:
              type: string
              description: The price prefix for the currency which can be used to format returned prices.
        customer:
          type: object
          properties:
            billing_address:
              type: object
              properties:
                billing_first_name:
                  type: string
                  description: Customers billing first name.
                billing_last_name:
                  type: string
                  description: Customers billing last name.
                billing_company:
                  type: string
                  description: Customers billing company name.
                billing_country:
                  type: string
                  description: Customers billing country.
                billing_address_1:
                  type: string
                  description: Customers billing address line one.
                billing_address_2:
                  type: string
                  description: Customers billing address line two.
                billing_city:
                  type: string
                  description: Customers billing address city.
                billing_state:
                  type: string
                  description: Customers billing state.
                billing_postcode:
                  type: string
                  description: Customers billing postcode or zip code.
                billing_phone:
                  type: string
                  description: Customers billing phone.
                billing_email:
                  type: string
                  description: Customers billing email address.
            shipping_address:
              type: object
              properties:
                shipping_first_name:
                  type: string
                  description: Customers shipping first name.
                shipping_last_name:
                  type: string
                  description: Customers shipping last name.
                shipping_company:
                  type: string
                  description: Customers shipping company name.
                shipping_country:
                  type: string
                  description: Customers shipping country.
                shipping_address_1:
                  type: string
                  description: Customers shipping address line one.
                shipping_address_2:
                  type: string
                  description: Customers shipping address line two.
                shipping_city:
                  type: string
                  description: Customers shipping address city.
                shipping_state:
                  type: string
                  description: Customers shipping state.
                shipping_postcode:
                  type: string
                  description: Customers shipping postcode or zip code.
        items:
          type: array
          items:
            type: object
            properties:
              item_key:
                type: string
                description: Unique ID of the item in the cart.
              id:
                type: integer
                description: Product ID or Variation ID of the item in the cart.
              name:
                type: string
                description: The name of the item in the cart.
              title:
                type: string
                description: The title of the item in the cart.
              price:
                type: string
                description: The price of the item in the cart.
              quantity:
                type: object
                properties:
                  value:
                    type: number
                    description: The quantity of the item in the cart.
                  min_purchase:
                    type: number
                    description: The minimum purchase amount required.
                  max_purchase:
                    type: number
                    description: The maximum purchase amount allowed. If -1 the item has an unlimited purchase amount.
              totals:
                type: object
                properties:
                  subtotal:
                    type: number
                    description: The subtotal of the item in the cart.
                  subtotal_tax:
                    type: number
                    description: The subtotal tax of the item in the cart.
                  total:
                    type: number
                    description: The total of the item in the cart.
                  total_tax:
                    type: number
                    description: The total tax of the item in the cart.
              slug:
                type: string
                description: The product slug of the item in the cart.
              meta:
                type: object
                properties:
                  product_type:
                    type: string
                    description: The product type of the item in the cart.
                  sku:
                    type: string
                    description: The SKU of the item in the cart.
                  dimensions:
                    type: object
                    properties:
                      length:
                        type: string
                        description: The length of the item in the cart.
                      width:
                        type: string
                        description: The width of the item in the cart.
                      height:
                        type: string
                        description: The height of the item in the cart.
                      unit:
                        type: string
                        description: The unit measurement of the item in the cart.
                  weight:
                    type: string
                    description: The weight of the item in the cart.
                  variation:
                    type: object
                    description: The variation attributes of the item in the cart (if item is a variation of a variable product).
              backorders:
                type: string
                description: The price of the item in the cart.
              cart_item_data:
                type: object
                description: Custom item data applied to the item in the cart (if any).
              featured_image:
                type: string
                description: The featured image of the item in the cart.
        item_count:
          type: integer
          description: The number of items in the cart.
        items_weight:
          type: string
          description: The total weight of all items in the cart.
        coupons:
          type: array
          items:
            type: object
            properties:
              coupon:
                type: string
                description: The coupon code.
              label:
                type: string
                description: The coupon label.
              saving:
                type: string
                description: The amount discounted from the cart.
              saving_html:
                type: string
                description: The amount discounted from the cart (HTML formatted).
        needs_payment:
          type: boolean
          description: True if the cart needs payment. False for carts with only free products and no shipping costs.
        needs_shipping:
          type: boolean
          description: True if the cart needs shipping and requires the showing of shipping costs.
        shipping:
          type: object
          properties:
            total_packages:
              type: integer
              description: The number of shipping packages available calculated on the shipping address.
            show_package_details:
              type: boolean
              description: True if the cart meets the criteria for showing items in the cart assigned to package.
            has_calculated_shipping:
              type: boolean
              description: True if the cart meets the criteria for showing shipping costs, and rates have been calculated and included in the totals.
            packages:
              type: object
              properties:
                default:
                  type: object
                  properties:
                    package_name:
                      type: string
                      description: The package name.
                    rates:
                      type: object
                      properties:
                        '[a-z0-9]':
                          type: object
                          properties:
                            key:
                              type: string
                              description: The rate key.
                            method_id:
                              type: string
                              description: The method ID.
                            instance_id:
                              type: integer
                              description: The instance ID.
                            label:
                              type: string
                              description: The rate label.
                            cost:
                              type: string
                              description: The rate cost.
                            html:
                              type: string
                              description: The rate HTML.
                            taxes:
                              type: string
                              description: The rate taxes.
                            chosen_method:
                              type: boolean
                              description: True if this rate is the chosen method.
                            meta_data:
                              type: object
                              description: The rate meta data.
                    package_details:
                      type: string
                      description: The package details if any.
                    index:
                      type: integer
                      description: The package index.
                    chosen_method:
                      type: string
                      description: The chosen method set from the available rates.
                    formatted_destination:
                      type: string
                      description: The destination the package.
        fees:
          type: object
          properties:
            '[a-zA-Z0-9]':
              type: object
              properties:
                name:
                  type: string
                  description: The fee name.
                fee:
                  type: string
                  description: The fee value.
        taxes:
          type: object
          properties:
            '[A-Z-TAX-0-9]':
              type: object
              properties:
                name:
                  type: string
                  description: The tax name.
                price:
                  type: string
                  description: The tax price.
        totals:
          type: object
          properties:
            subtotal:
              type: string
              description: The subtotal of all items, shipping (if any) and fees (if any) before coupons applied (if any) to the cart.
            subtotal_tax:
              type: string
              description: The subtotal tax of all items, shipping (if any) and fees (if any) before coupons applied (if any) to the cart.
            fee_total:
              type: string
              description: The fee total.
            fee_tax:
              type: string
              description: The fee tax.
            discount_total:
              type: string
              description: The discount total.
            discount_tax:
              type: string
              description: The discount tax.
            shipping_total:
              type: string
              description: The shipping total of the selected packages.
            shipping_tax:
              type: string
              description: The shipping tax.
            total:
              type: string
              description: The total of everything in the cart.
            total_tax:
              type: string
              description: The total tax.
        removed_items:
          type: array
          items:
            type: object
            properties:
              item_key:
                type: string
                description: Unique ID of the item.
              id:
                type: integer
                description: Product ID or Variation ID of the item.
              name:
                type: string
                description: The name of the item.
              title:
                type: string
                description: The title of the item.
              price:
                type: string
                description: The price of the item.
              quantity:
                type: number
                description: The quantity of the item.
              totals:
                type: object
                properties:
                  subtotal:
                    type: number
                    description: The subtotal of the item.
                  subtotal_tax:
                    type: number
                    description: The subtotal tax of the item.
                  total:
                    type: number
                    description: The total of the item.
                  total_tax:
                    type: number
                    description: The total tax of the item.
              slug:
                type: string
                description: The product slug of the item in the cart.
              meta:
                type: object
                properties:
                  product_type:
                    type: string
                    description: The product type of the item.
                  sku:
                    type: string
                    description: The SKU of the item.
                  dimensions:
                    type: object
                    properties:
                      length:
                        type: string
                        description: The length of the item.
                      width:
                        type: string
                        description: The width of the item.
                      height:
                        type: string
                        description: The height of the item.
                      unit:
                        type: string
                        description: The unit measurement of the item.
                  weight:
                    type: string
                    description: The weight of the item.
                  variation:
                    type: object
                    description: The variation attributes of the item (if item is a variation of a variable product).
              backorders:
                type: string
                description: The price of the item in the cart.
              cart_item_data:
                type: object
                description: Custom item data applied to the item (if any).
              featured_image:
                type: string
                description: The featured image of the item in the cart.
        cross_sells:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                description: Product ID or Variation ID of the cross-sell product.
              name:
                type: string
                description: The name of the cross-sell product.
              title:
                type: string
                description: The title of the cross-sell product.
              slug:
                type: string
                description: The slug of the cross-sell product.
              price:
                type: string
                description: The price of the cross-sell product.
              regular_price:
                type: string
                description: The regular price of the cross-sell product.
              sale_price:
                type: string
                description: The sale price of the cross-sell product.
              image:
                type: string
                description: The image of the cross-sell product.
              average_rating:
                type: string
                description: The average rating of the cross-sell product.
              on_sale:
                type: boolean
                description: The sale status of the cross-sell product.
              type:
                type: string
                description: The product type of the cross-sell product.
        notices:
          type: object
          properties:
            success:
              type: array
              items:
                type: string
              description: Notices for successful actions.
            info:
              type: array
              items:
                type: string
              description: Notices for informational actions.
            error:
              type: array
              items:
                type: string
              description: Notices for error actions.
    AddItem:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the product or variation ID.
        quantity:
          type: string
          description: Quantity amount.
          default: '1'
        variation:
          type: object
          description: Variation attributes that identify the variation of the item.
        item_data:
          type: object
          description: Additional item data to make the item unique.
        email:
          type: string
          description: Customers billing email address.
        price:
          type: string
          description: Set a custom price for the item.
        return_item:
          type: boolean
          description: Returns the item details once added.
          default: false
    AddItems:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the container product ID.
        quantity:
          type: object
          description: List of items and quantity to add to the cart.
        email:
          type: string
          description: Customers billing email address.
        return_items:
          type: boolean
          description: Returns the items details once added.
          default: false
    cartItem:
      type: "object"
      properties:
        item_key:
          type: "string"
          description: "Unique ID of the item in the cart."
        id:
          type: "integer"
          description: "Product ID or Variation ID of the item."
        name:
          type: "string"
          description: "The name of the item."
        title:
          type: "string"
          description: "The title of the item."
        price:
          type: "string"
          description: "The price of the item."
        quantity:
          type: "object"
          properties:
            value:
              type: "float"
              description: "The quantity of the item."
            min_purchase:
              type: "integer"
              description: "The minimum purchase amount required."
            max_purchase:
              type: "integer"
              description: "The maximum purchase amount allowed. If -1 the item has an unlimited purchase amount."
        totals:
          type: "object"
          properties:
            subtotal:
              type: "float"
              description: "The subtotal of the item in cart."
            subtotal_tax:
              type: "float"
              description: "The subtotal tax of the item in cart."
            total:
              type: "float"
              description: "The total of the item in cart."
            total_tax:
              type: "float"
              description: "The total tax of the item in cart."
        slug:
          type: "string"
          description: "The product slug of the item."
        meta:
          type: "object"
          properties:
            product_type:
              type: "string"
              description: "The product type of the item in cart."
            sku:
              type: "string"
              description: "The SKU of the item in cart."
            dimensions:
              type: "object"
              properties:
                length:
                  type: "string"
                  description: "The length of the item in cart."
                width:
                  type: "string"
                  description: "The width of the item in cart."
                height:
                  type: "string"
                  description: "The height of the item in cart."
                unit:
                  type: "string"
                  description: "The unit measurement of the item in cart."
            weight:
              type: "string"
              description: "The weight of the item in cart."
            variation:
              type: "object"
              properties: {}
        backorders:
          type: "string"
          description: "The price of the item."
        cart_item_data:
          type: "object"
          properties: {}
        featured_image:
          type: "string"
          description: "The featured image of the item."
